<?xml version="1.0" encoding="UTF-8"?>
<!--sakai2 -->
<project
  default="sakai:build"
  xmlns:ant="jelly:ant"
  xmlns:j="jelly:core">

   <goal name="standalone">
           <ant:echo message="Samigo: top level STANDALONE BUILD."/>
           <j:set var="goal" value="standalone" />
           <j:set var="maven.multiproject.includes" value="*/project.xml" />
           <attainGoal name="multiproject:goal" />
   </goal>

   <!-- The Maven plug-in for Hibernate 3 is not yet available to support this goal. -->
   <!--
   <attainGoal name="hibernate:schema-export" />
   -->
   
   <goal name="schemaexport">
     <ant:path id="schemaexport.classpath">
       <ant:path refid="maven.dependency.classpath" />
       <ant:pathelement location="${basedir}/samigo-hibernate/target/classes" />
       <ant:pathelement location="${basedir}/samigo-api/target/classes" />
       <ant:pathelement location="../../tomcat/shared/lib/hibernate-3.1.3.jar" />
       <ant:pathelement location="../../tomcat/shared/lib/commons-logging-1.0.4.jar" />
       <ant:pathelement location="../../tomcat/shared/lib/commons-collections-3.1.jar" />
       <ant:pathelement location="../../tomcat/shared/lib/cglib-nodep-2.1_3.jar" />
       <ant:pathelement location="../../.maven/repository/dom4j/jars/dom4j-1.6.1.jar"/>
       <ant:pathelement location="../../.maven/repository/log4j/jars/log4j-1.2.9.jar"/>
     </ant:path>

     <ant:taskdef name="schemaexport"
         classname="org.hibernate.tool.hbm2ddl.SchemaExportTask"
         classpathref="schemaexport.classpath" />
     <ant:schemaexport properties="${basedir}/hibernate.properties"
         delimiter=";" text="yes" output="schema-export.sql">
       <ant:fileset
           dir="${basedir}/samigo-hibernate/src/java/org/sakaiproject/tool/assessment/data/dao">
         <ant:include name="**/*.hbm.xml"/>
       </ant:fileset>
     </ant:schemaexport>

   </goal>
</project>